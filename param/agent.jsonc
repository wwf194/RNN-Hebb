{
    "Task": "$^param.task.Task",
    "HiddenNeurons.Num": 500,
    "HiddenNeurons.IsExciInhi": false,
    "InitTasks":[
        {
            "FunctionCall": [
                "&*SetModelInputOutput",
                "&*ParseParam",
            ]
        },
    ],
    "Modules":{
        //"Dataset":"$^param.image",
        "model":"$^param.model",
        "model.Input.Type": "dLDirection", //dXY
        "model.InputInit.Type": "__ToBeSet__",
        "model.ModulePath": "utils_torch.Modules.RNNLIF",
        "__ResolveBase__": true,
    },
    "Dynamics":{
        "TrainEpochInit":{ // Things to do before new epoch.
            "In": ["BatchParam", "OptimizeParam", "log"],
            "Out": ["BatchNum"],
            "Routings":[
                "Type=Train |--> &^object.image.ClearBatches",
                "BatchParam, Type=Train |--> &^object.image.PrepareBatches",
                "Type=Train |--> &^object.image.GetBatchNum |--> BatchNum",
            ]
        },
        "TrainBatch":{
            "In":["BatchParam", "TrainParam", "log"],
            "Out":[],
            "Routings": [
                "Type=Train |--> &^object.image.GetBatch |--> DataBatch",
                "DataBatch, Name=Input |--> &FilterFromDict |--> ModelInput",
                "DataBatch, Name=Output |--> &FilterFromDict |--> ModelOutputTarget",
                "ModelInput, ModelOutputTarget, TrainParam, log |--> &model.Dynamics.TrainBatch",
            ],
        },
        "InitBeforeEpochTest":{
            "In": ["BatchParam", "TrainParam"],
            "Out": ["BatchNum"],
            "Routings":[
                "Type=Test |--> &^object.image.ClearBatches",
                "BatchParam, Type=Test |--> &^object.image.PrepareBatches",
                "Type=Test |--> &^object.image.GetBatchNum|--> BatchNum",
            ]
        },
        "TestBatch":{
            "In":["BatchParam", "TrainParam", "log"],
            "Out":[],
            "Routings": [
                "Type=Test |--> &^object.image.GetBatch |--> DataBatch",
                "DataBatch, Name=Input |--> &FilterFromDict |--> ModelInput",
                "DataBatch, Name=Output |--> &FilterFromDict |--> ModelOutputTarget",
                "ModelInput, ModelOutputTarget, TrainParam, log |--> &model.Dynamics.TestBatch",
            ],
        },
        "TestBatchRandom":{
            "In":["BatchParam", "TrainParam", "log"],
            "Out":[],
            "Routings": [
                "Type=Test |--> &^object.image.GetRandomBatch |--> DataBatch",
                "DataBatch, Name=Input |--> &FilterFromDict |--> ModelInput",
                "DataBatch, Name=Output |--> &FilterFromDict |--> ModelOutputTarget",
                "ModelInput, ModelOutputTarget, TrainParam, log |--> &model.Dynamics.TestBatch",
            ],
        }
    }
}